<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Royal Games Admin ‚Äî Monthly Income</title>
<style>
body{font-family:sans-serif;background:#0b0f1a;color:#fff;padding:20px;}
.card{background:#111827;padding:20px;border-radius:12px;max-width:400px;margin:20px auto;text-align:center;}
input,select,button{padding:10px;margin:5px;width:80%;border-radius:8px;border:none;font-size:16px;}
button{cursor:pointer;background:#22c55e;color:#fff;font-weight:bold;}
#incomeResult{margin-top:12px;color:#22c55e;font-weight:bold;font-size:18px;}
#loginMsg{margin-top:10px;color:#f87171;font-weight:bold;}
</style>
</head>
<body>

<!-- LOGIN CARD -->
<div class="card" id="loginCard">
  <h2>üîí Admin Login</h2>
  <input type="password" id="adminPass" placeholder="Enter Password">
  <button onclick="checkPassword()">Login</button>
  <div id="loginMsg"></div>
</div>

<!-- INCOME CARD -->
<div class="card" id="incomeCard" style="display:none;">
  <h2>üí∞ Monthly Income (Admin Only)</h2>
  <select id="monthSelect">
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    <option value="4">April</option>
    <option value="5">May</option>
    <option value="6">June</option>
    <option value="7">July</option>
    <option value="8">August</option>
    <option value="9">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
  </select>
  <input type="number" id="yearInput" value="2026" placeholder="Year">
  <button onclick="showIncome()">Calculate</button>
  <div id="incomeResult"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ====== FIREBASE CONFIG ======
const firebaseConfig = {
  databaseURL: "https://royalgamesproject-default-rtdb.asia-southeast1.firebasedatabase.app"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ====== PASSWORD PROTECTION ======
const ADMIN_PASSWORD = "YUVRAJ0011"; // change to your own secure password

function checkPassword(){
  const input = document.getElementById('adminPass').value;
  if(input === ADMIN_PASSWORD){
    document.getElementById('loginCard').style.display = 'none';
    document.getElementById('incomeCard').style.display = 'block';
  } else {
    document.getElementById('loginMsg').innerText = "‚ùå Wrong password!";
  }
}

// ====== CALCULATE MONTHLY INCOME ======
function showIncome(){
  const month = parseInt(document.getElementById('monthSelect').value);
  const year = parseInt(document.getElementById('yearInput').value);

  db.ref('bookings').once('value').then(snapshot=>{
    let total = 0;
    snapshot.forEach(child=>{
      const booking = child.val();
      const date = new Date(booking.timestamp);
      if(date.getMonth()+1 === month && date.getFullYear() === year){
        total += booking.finalPrice;
      }
    });
    document.getElementById('incomeResult').innerText = `üíµ Total Income: ‚Çπ${total}`;
  }).catch(err=>{
    document.getElementById('incomeResult').innerText = "‚ùå Error fetching data!";
    console.error(err);
  });
}
</script>

</body>
    </html>
      
