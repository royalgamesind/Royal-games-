<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Royal Games Neemuch | PS5 & Xbox Rentals</title>
<meta name="description" content="Royal Games provides PlayStation 5 and Xbox on rent in Neemuch, Madhya Pradesh.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* --- YOUR ORIGINAL STYLES --- */
body{margin:0;font-family:'Roboto',sans-serif;background:#0b0f1a;color:#fff;transition: 0.5s;}
.header{background:linear-gradient(90deg,#111827,#1e293b);padding:25px 15px;text-align:center;border-bottom:4px solid gold}
.header h1{margin:0;font-family:'Orbitron',sans-serif;color:gold;font-size:36px;letter-spacing:3px}
.tag{color:#cbd5e1;font-size:16px;margin-top:5px}
.section{padding:30px 15px}
.card{background:#111827;border-radius:20px;padding:20px;margin:20px auto;max-width:520px;box-shadow:0 0 20px rgba(0,255,255,.1);transition:.3s}
.card:hover{transform:translateY(-5px);box-shadow:0 0 25px rgba(0,255,255,.3)}
.card img{width:100%;border-radius:15px;margin-bottom:15px}
.game-list{background:#1f2937;padding:15px;border-radius:12px;margin-top:15px}
.game-list h3{color:#0ea5e9;margin-bottom:10px;font-family:'Orbitron',sans-serif}
.price{font-size:20px;color:#22c55e;font-weight:bold;margin-top:10px}
.btn,.booking button{display:block;width:100%;padding:16px;background:#25D366;color:#fff;border-radius:12px;font-weight:bold;font-size:18px;text-align:center;margin-top:12px;cursor:pointer;border:none}
.booking input,.booking select,.booking textarea{width:95%;padding:14px;margin-top:10px;border-radius:12px;border:none;background:#1f2937;color:#fff}
.review-gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
.floating-call{position:fixed;bottom:22px;right:20px;width:65px;height:65px;background:linear-gradient(135deg,#22c55e,#15803d);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;color:white;text-decoration:none;z-index:9999;box-shadow:0 10px 25px rgba(0,0,0,0.5);}

/* --- NEW PLATINUM/GOLD THEME OVERRIDES --- */
body.gold-theme .header { border-bottom: 4px solid #fbbf24; background: linear-gradient(90deg, #1e293b, #fbbf24); }
body.gold-theme .header h1 { color: #000; }
body.gold-theme .card { border: 1px solid #fbbf24; }

body.platinum-theme { background: #020617; }
body.platinum-theme .header { border-bottom: 4px solid #38bdf8; background: linear-gradient(90deg, #0f172a, #38bdf8); }
body.platinum-theme .header h1 { color: #fff; text-shadow: 0 0 15px #38bdf8; }
body.platinum-theme .card { border: 1px solid #38bdf8; box-shadow: 0 0 20px rgba(56, 189, 248, 0.2); }

/* Ghost Alert Style */
#ghostAlert { position: fixed; bottom: 100px; left: 20px; background: gold; color: #000; padding: 15px; border-radius: 12px; font-weight: bold; display: none; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
#loyaltyBanner { display: none; margin-bottom: 15px; padding: 10px; border-radius: 10px; text-align: center; font-weight: bold; color: #000; }
</style>
</head>
<body id="mainBody">

<div id="ghostAlert"></div>

<div class="header">
    <h1>üëë ROYAL GAMES</h1>
    <div class="tag">PS5 & Xbox Console Rental Service ‚Äî Neemuch (MP)</div>
</div>

<div class="section">
<div class="card">
    <h2>PlayStation 5</h2>
    <img src="images.jpeg">
    <div class="price">‚Çπ<span id="ps5Disp1">500</span> / 1 Day</div>
    <div class="price">‚Çπ<span id="ps5Disp2">800</span> / 2 Days</div>

    <div class="game-list">
        <h3>Available PS5 Games üéÆ</h3>
        <p>‚Ä¢ GTA V, Wukong, Ghost of Tsushima, Spider-Man, God of War Ragnar√∂k</p>
    </div>
</div>
</div>

<div class="section">
<div class="card">
    <h2>Xbox One</h2>
    <img src="images (1).jpeg">
    <div class="price">‚Çπ<span id="xbDisp1">400</span> / 1 Day</div>
    <div class="price">‚Çπ<span id="xbDisp2">700</span> / 2 Days</div>

    <div class="game-list">
        <h3>Available Xbox Games üïπÔ∏è</h3>
        <p>‚Ä¢ GTA V, Forza Horizon 5, FIFA 25, Minecraft, Mortal Kombat 11</p>
    </div>
</div>
</div>

<div style="text-align:center; margin:20px; color:#facc15; font-weight:bold;">
‚ö†Ô∏è Please do not edit the WhatsApp message. Edited bookings will not be considered valid.
</div>
<div class="card booking">
  <h2>üéÆ Book Your Console</h2>
  <div id="loyaltyBanner"></div>
  
  <input type="tel" id="phone" placeholder="Mobile Number (Checks VIP Level)" oninput="checkLoyalty()">
  <input type="text" id="name" placeholder="Your Name">
  
  <select id="console">
    <option value="PS5">PS5</option>
    <option value="Xbox One">Xbox One</option>
  </select>

  <input type="date" id="startDate">
  <select id="days">
    <option value="1">1 Day</option>
    <option value="2">2 Days</option>
  </select>

  <input type="text" id="coupon" placeholder="Enter Coupon Code (optional)">
  <div id="finalPrice" style="margin-top:10px;color:#22c55e;font-weight:bold;"></div>
    
  <input type="text" id="requestedGame" placeholder="Request a game (optional)">
  <button id="bookBtn" onclick="sendToWhatsApp(event)">Book on WhatsApp</button>
</div>

<div class="section">
    <div class="card">
      <h2>‚≠ê Customer Review Gallery</h2>
      <div class="review-gallery" id="reviewGallery"></div>
    </div>
</div>

<div class="footer" style="text-align:center; padding:20px; color:gray;">¬© 2026 Royal Games ‚Äî Neemuch</div>
<a href="tel:9303088645" class="floating-call">üìû</a>

<script>
// --- CONFIG & INIT ---
const firebaseConfig = { databaseURL: "https://royalgamesproject-default-rtdb.asia-southeast1.firebasedatabase.app" };
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let currentSurge = 1.0;
let userLevel = "Bronze";

// 1. GOD MODE LISTENER (Surge Pricing & Locks)
db.ref('remoteControl').on('value', snap => {
    const data = snap.val() || {};
    currentSurge = data.surge || 1.0;

    // Update displayed prices with surge
    document.getElementById('ps5Disp1').innerText = Math.round(500 * currentSurge);
    document.getElementById('ps5Disp2').innerText = Math.round(800 * currentSurge);
    document.getElementById('xbDisp1').innerText = Math.round(400 * currentSurge);
    document.getElementById('xbDisp2').innerText = Math.round(700 * currentSurge);

    // Locks
    const btn = document.getElementById('bookBtn');
    if(data.ps5Locked && data.xboxLocked) {
        btn.innerText = "Rentals Paused"; btn.disabled = true; btn.style.background = "#374151";
    } else {
        btn.innerText = "Book on WhatsApp"; btn.disabled = false; btn.style.background = "#25D366";
    }

    if(data.ghostMode) startGhostAlerts();
    calculatePrice();
});

// 2. LOYALTY SYSTEM (Theme Switching)
function checkLoyalty() {
    const phone = document.getElementById('phone').value.trim();
    const banner = document.getElementById('loyaltyBanner');
    const body = document.getElementById('mainBody');

    if(phone.length < 10) { body.className = ""; banner.style.display="none"; userLevel="Bronze"; calculatePrice(); return; }

    db.ref('customerStats/' + phone).once('value', snap => {
        const d = snap.val();
        body.className = "";
        if(d && d.level) {
            userLevel = d.level;
            banner.style.display = "block";
            if(userLevel === "Platinum") {
                body.classList.add("platinum-theme");
                banner.innerText = "üíé PLATINUM MEMBER: 15% EXTRA OFF";
                banner.style.background = "#38bdf8";
            } else if(userLevel === "Gold") {
                body.classList.add("gold-theme");
                banner.innerText = "üëë GOLD MEMBER: 10% EXTRA OFF";
                banner.style.background = "#fbbf24";
            }
        } else { userLevel = "Bronze"; banner.style.display="none"; }
        calculatePrice();
    });
}

// 3. PRICE CALCULATION (Surge + YOUR ORIGINAL COUPONS + Loyalty)
function calculatePrice() {
    const consoleType = document.getElementById('console').value;
    const days = document.getElementById('days').value;
    const coupon = document.getElementById('coupon').value.trim().toUpperCase();

    // Base Price
    let base = 0;
    if(consoleType === "PS5") base = (days === "1") ? 500 : 800;
    else base = (days === "1") ? 400 : 700;

    // Apply God-Mode Surge
    let surgedTotal = Math.round(base * currentSurge);

    // YOUR ORIGINAL COUPON LOGIC (Exact Conditions)
    let couponDisc = 0;
    if(coupon === "CONGRATS100") couponDisc = 500;
    if(coupon === "CONGRATS50" && consoleType === "PS5") couponDisc = 250;
    if(coupon === "CONGRATS40" && consoleType === "PS5") couponDisc = 200;

    // Loyalty Discount
    let loyaltyPct = 0;
    if(userLevel === "Gold") loyaltyPct = 0.10;
    if(userLevel === "Platinum") loyaltyPct = 0.15;
    let loyaltyDisc = Math.round(surgedTotal * loyaltyPct);

    let final = surgedTotal - couponDisc - loyaltyDisc;
    if(final < 0) final = 0;

    document.getElementById("finalPrice").innerText = 
        `Package: ‚Çπ${surgedTotal} | Discount: ‚Çπ${couponDisc + loyaltyDisc} | Final: ‚Çπ${final}`;
    
    return { surgedTotal, couponDisc, loyaltyDisc, final };
}

// 4. WHATSAPP & PDF (Your original IDs and logic)
function sendToWhatsApp(event) {
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    if(!name || !phone) return alert("Fill all fields");

    const prices = calculatePrice();
    const custID = 'RG' + Date.now();

    // Check Bargainer Alert
    db.ref('customerNotes/'+phone).once('value', snap => {
        if(snap.exists()) window.open("https://wa.me/919303088645?text=" + encodeURIComponent("‚ö†Ô∏è Repeat Customer/Bargainer Alert: " + phone));
    });

    db.ref('bookings/' + custID).set({
        customerID: custID, name, phone, 
        console: document.getElementById('console').value,
        startDate: document.getElementById('startDate').value,
        days: document.getElementById('days').value,
        finalPrice: prices.final,
        status: "Active", timestamp: Date.now()
    }).then(() => {
        generateInvoicePDF({ customerID: custID, name, phone, console: document.getElementById('console').value, finalPrice: prices.final });
        const msg = `üéÆ *Royal Games Booking*\nID: ${custID}\nName: ${name}\nPrice: ‚Çπ${prices.final}\nLevel: ${userLevel}`;
        window.open("https://wa.me/919303088645?text=" + encodeURIComponent(msg));
    });
}

function generateInvoicePDF(data) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.text("ROYAL GAMES üëë", 20, 20);
    doc.text("Invoice ID: " + data.customerID, 20, 30);
    doc.text("Customer: " + data.name, 20, 40);
    doc.text("Total: ‚Çπ" + data.finalPrice, 20, 50);
    doc.save("Invoice_" + data.customerID + ".pdf");
}

function loadReviews() {
    db.ref('reviews').limitToLast(6).on('value', snap => {
        const gallery = document.getElementById('reviewGallery');
        gallery.innerHTML = "";
        snap.forEach(c => {
            const r = c.val();
            gallery.innerHTML += `<div style="background:#1f2937; padding:12px; border-radius:12px;">
                <strong>${r.name}</strong> <span style="color:gold">${'‚≠ê'.repeat(r.rating)}</span>
                <p style="font-size:13px;">${r.message}</p>
            </div>`;
        });
    });
}

function startGhostAlerts() {
    setInterval(() => {
        const el = document.getElementById('ghostAlert');
        const names = ["Rahul", "Aman", "Deepak", "Suresh"];
        el.innerText = `üî• ${names[Math.floor(Math.random()*names.length)]} just booked a PS5!`;
        el.style.display = 'block';
        setTimeout(() => el.style.display='none', 4000);
    }, 30000);
}

['startDate','days','console','coupon'].forEach(id => document.getElementById(id).addEventListener('change', calculatePrice));
window.onload = loadReviews;
</script>
</body>
    </html>










            
