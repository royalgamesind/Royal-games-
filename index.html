<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Royal Games Neemuch | PS5 & Xbox Rentals</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* --- THEME VARIABLES --- */
:root {
    --bg-color: #0b0f1a;
    --card-bg: #111827;
    --accent: gold;
    --btn: #25D366;
    --text: #fff;
    --glow: rgba(255, 215, 0, 0.1);
}

/* GOLD THEME (For Gold Members) */
body.gold-theme {
    --accent: #fbbf24;
    --glow: rgba(251, 191, 36, 0.4);
}
body.gold-theme .header { background: linear-gradient(90deg, #1e293b, #fbbf24); border-bottom: 4px solid #fbbf24; }
body.gold-theme .header h1 { color: #000; }

/* PLATINUM THEME (For Platinum Members) */
body.platinum-theme {
    --accent: #38bdf8;
    --btn: #0ea5e9;
    --glow: rgba(56, 189, 248, 0.5);
}
body.platinum-theme .header { background: linear-gradient(90deg, #0f172a, #38bdf8); border-bottom: 4px solid #38bdf8; }
body.platinum-theme .header h1 { color: #fff; text-shadow: 0 0 15px #38bdf8; }
body.platinum-theme .card { border: 1px solid #38bdf8; }

/* STANDARD CSS */
body{margin:0;font-family:'Roboto',sans-serif;background:var(--bg-color);color:var(--text);transition: 0.5s;}
.header{background:linear-gradient(90deg,#111827,#1e293b);padding:25px 15px;text-align:center;border-bottom:4px solid var(--accent);transition: 0.5s;}
.header h1{margin:0;font-family:'Orbitron',sans-serif;color:var(--accent);font-size:36px;letter-spacing:3px}
.tag{color:#cbd5e1;font-size:16px;margin-top:5px}
.section{padding:30px 15px}
.card{background:var(--card-bg);border-radius:20px;padding:20px;margin:20px auto;max-width:520px;box-shadow:0 0 20px var(--glow);transition:.3s}
.card img{width:100%;border-radius:15px;margin-bottom:15px}
.price{font-size:20px;color:#22c55e;font-weight:bold;margin-top:10px}
.btn, .booking-btn{display:block;width:100%;padding:16px;background:var(--btn);color:#fff;border-radius:12px;font-weight:bold;font-size:18px;text-align:center;margin-top:12px;cursor:pointer;border:none}
.btn:hover{filter:brightness(1.1)}
.booking input, .booking select, .booking textarea{width:95%;padding:14px;margin-top:10px;border-radius:12px;border:none;background:#1f2937;color:#fff}
.booking textarea{height:80px}
.game-list{background:#1f2937;padding:15px;border-radius:12px;margin-top:15px}
.game-list p{margin:5px 0;padding:5px;}

/* DYNAMIC ELEMENTS */
#loyaltyStatus { margin-top: 10px; font-weight: bold; padding: 10px; border-radius: 10px; display: none; text-align: center; color: #000; }
#ghostAlert { position: fixed; bottom: 20px; left: 20px; background: var(--accent); color: #000; padding: 15px; border-radius: 12px; font-weight: bold; display: none; z-index: 1000; animation: slideIn 0.5s; }
.floating-call{position:fixed;bottom:22px;right:20px;width:65px;height:65px;background:linear-gradient(135deg,#22c55e,#15803d);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;color:white;text-decoration:none;z-index:9999;box-shadow:0 10px 25px rgba(0,0,0,0.5);}
.review-gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
@media(max-width:600px){.review-gallery{grid-template-columns:1fr;}}
@keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }
</style>
</head>
<body id="mainBody">

<div id="ghostAlert"></div>

<div class="header">
    <h1>üëë ROYAL GAMES</h1>
    <div class="tag">PS5 & Xbox Console Rental Service ‚Äî Neemuch (MP)</div>
</div>

<div class="section">
    <div class="card">
        <h2>PlayStation 5</h2>
        <img src="https://i.imgur.com/ToKqE13.jpeg" alt="PS5" onerror="this.style.display='none'">
        <div class="price">‚Çπ<span id="ps5Price1">500</span> / 1 Day</div>
        <div class="price">‚Çπ<span id="ps5Price2">800</span> / 2 Days</div>
        <div class="game-list">
            <h3>Available Games üéÆ</h3>
            <p>‚Ä¢ GTA V, Ghost of Tsushima, Spider-Man, God of War Ragnar√∂k</p>
        </div>
    </div>
</div>

<div class="section">
    <div class="card">
        <h2>Xbox One</h2>
        <img src="https://i.imgur.com/w9F111d.jpeg" alt="Xbox" onerror="this.style.display='none'">
        <div class="price">‚Çπ<span id="xboxPrice1">400</span> / 1 Day</div>
        <div class="price">‚Çπ<span id="xboxPrice2">700</span> / 2 Days</div>
        <div class="game-list">
            <h3>Available Games üïπÔ∏è</h3>
            <p>‚Ä¢ GTA V, Forza Horizon 5, FIFA 25, Minecraft</p>
        </div>
    </div>
</div>

<div class="section">
    <div style="text-align:center; color:gold; font-weight:bold; margin-bottom:10px;">‚ö†Ô∏è Do not edit the WhatsApp message!</div>
    <div class="card booking">
      <h2>üéÆ Book Your Console</h2>
      <div id="loyaltyStatus"></div>
      
      <input type="tel" id="phone" placeholder="Mobile Number (Enter to Check VIP Level)" oninput="checkLoyaltyStatus()">
      <input type="text" id="name" placeholder="Your Name">
      
      <select id="console">
        <option>PS5</option>
        <option>Xbox One</option>
      </select>
      
      <input type="date" id="startDate">
      <select id="days">
        <option value="1">1 Day</option>
        <option value="2">2 Days</option>
      </select>
      
      <input type="text" id="coupon" placeholder="Coupon Code (Optional)">
      <div id="finalPrice" style="margin-top:10px;color:#22c55e;font-weight:bold;"></div>
      
      <button class="booking-btn" id="bookBtn" onclick="sendToWhatsApp(event)">Book on WhatsApp</button>
    </div>
</div>

<div class="section">
    <div class="card booking">
        <h2 style="color:gold;">üìù Write a Review</h2>
        <input type="text" id="reviewName" placeholder="Your Name">
        <select id="reviewRating">
            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
            <option value="3">‚≠ê‚≠ê‚≠ê</option>
        </select>
        <textarea id="reviewMessage" placeholder="Your experience..."></textarea>
        <button class="booking-btn" onclick="sendReview()">Submit Review</button>
    </div>
</div>

<div class="section">
    <div class="card">
      <h2>‚≠ê Customer Reviews</h2>
      <div class="review-gallery" id="reviewGallery">Loading reviews...</div>
    </div>
</div>

<div class="footer">¬© 2026 Royal Games ‚Äî Gaming Console Rentals</div>
<a href="tel:9303088645" class="floating-call">üìû</a>

<script>
// --- FIREBASE SETUP ---
const firebaseConfig = {
  databaseURL: "https://royalgamesproject-default-rtdb.asia-southeast1.firebasedatabase.app"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let userLoyaltyLevel = "Bronze";
let currentSurge = 1.0;
let basePrices = { ps5_1: 500, ps5_2: 800, xbox_1: 400, xbox_2: 700 };

// 1. LOYALTY & THEME LOGIC
function checkLoyaltyStatus() {
    const phone = document.getElementById('phone').value.trim();
    const statusDiv = document.getElementById('loyaltyStatus');
    const body = document.getElementById('mainBody');

    if (phone.length < 10) {
        statusDiv.style.display = "none";
        body.className = "";
        userLoyaltyLevel = "Bronze";
        calculatePrice();
        return;
    }

    db.ref('customerStats/' + phone).once('value', snap => {
        const stats = snap.val();
        body.className = ""; 
        if (stats && stats.level) {
            userLoyaltyLevel = stats.level;
            statusDiv.style.display = "block";
            if (userLoyaltyLevel === "Platinum") {
                body.classList.add("platinum-theme");
                statusDiv.innerText = "üíé PLATINUM MEMBER: 15% OFF";
                statusDiv.style.background = "#38bdf8";
            } else if (userLoyaltyLevel === "Gold") {
                body.classList.add("gold-theme");
                statusDiv.innerText = "üëë GOLD MEMBER: 10% OFF";
                statusDiv.style.background = "#fbbf24";
            } else {
                statusDiv.innerText = "ü•à SILVER MEMBER: 5% OFF";
                statusDiv.style.background = "#94a3b8";
            }
        } else {
            userLoyaltyLevel = "Bronze";
            statusDiv.style.display = "none";
        }
        calculatePrice();
    });
}

// 2. GOD MODE LISTENER (Surge, Lock, Ghost)
db.ref('remoteControl').on('value', snap => {
    const data = snap.val() || {};
    currentSurge = data.surge || 1.0;
    
    // Update visual prices
    document.getElementById('ps5Price1').innerText = Math.round(basePrices.ps5_1 * currentSurge);
    document.getElementById('ps5Price2').innerText = Math.round(basePrices.ps5_2 * currentSurge);
    document.getElementById('xboxPrice1').innerText = Math.round(basePrices.xbox_1 * currentSurge);
    document.getElementById('xboxPrice2').innerText = Math.round(basePrices.xbox_2 * currentSurge);

    // Locks
    const btn = document.getElementById('bookBtn');
    if(data.ps5Locked && data.xboxLocked){
        btn.innerText = "‚õî Rentals Temporarily Paused";
        btn.disabled = true;
        btn.style.background = "#374151";
    } else {
        btn.innerText = "Book on WhatsApp";
        btn.disabled = false;
        btn.style.background = ""; // reset
    }

    if(data.ghostMode) startGhostAlerts();
    calculatePrice();
});

// 3. PRICE CALCULATION
function calculatePrice() {
    const consoleType = document.getElementById('console').value;
    const days = document.getElementById('days').value;
    const coupon = document.getElementById('coupon').value.trim().toUpperCase();

    let base = 0;
    if (consoleType === "PS5") base = days == "1" ? 500 : 800;
    else base = days == "1" ? 400 : 700;

    let total = Math.round(base * currentSurge);

    let loyaltyDisc = 0;
    if (userLoyaltyLevel === "Silver") loyaltyDisc = 0.05;
    if (userLoyaltyLevel === "Gold") loyaltyDisc = 0.10;
    if (userLoyaltyLevel === "Platinum") loyaltyDisc = 0.15;

    let loyaltyAmount = Math.round(total * loyaltyDisc);
    let couponAmount = (coupon === "CONGRATS75") ? 80 : 0;
let discount=0;
  if(coupon==="CONGRATS76") discount=80;
  if(coupon==="CONGRATS50" && consoleType==="PS5") discount=250;
  if(coupon==="CONGRATS40" && consoleType==="PS5") discount=200;

    
    let final = total - loyaltyAmount - couponAmount;
    if(final < 0) final = 0;

    document.getElementById("finalPrice").innerText = `Final Price: ‚Çπ${final}`;
    return { total, final, discount: loyaltyAmount + couponAmount };
}

// 4. BOOKING & WHATSAPP
function sendToWhatsApp(event) {
    const btn = event.target;
    btn.disabled = true;
    btn.innerText = "Processing...";

    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const consoleType = document.getElementById('console').value;
    const days = document.getElementById('days').value;
    const startDate = document.getElementById('startDate').value;

    if(!name || !phone || !startDate) {
        alert("Fill all fields!");
        btn.disabled = false;
        btn.innerText = "Book on WhatsApp";
        return;
    }

    // Check Bargainer
    db.ref('customerNotes/'+phone).once('value', snap => {
        if(snap.exists() && snap.val().tag === "Bargainer"){
            window.open("https://wa.me/919303088645?text=" + encodeURIComponent("‚ö†Ô∏è ALERT: Bargainer detected trying to book."));
        }
    });

    const prices = calculatePrice(); // Get latest price
    const custID = 'RG' + Date.now();

    // Save Booking
    db.ref('bookings/' + custID).set({
        customerID: custID,
        name, phone, console: consoleType, startDate, days,
        finalPrice: prices.final,
        status: "Active",
        timestamp: Date.now()
    }).then(() => {
        // PDF
        generateInvoicePDF({ customerID: custID, name, phone, console: consoleType, startDate, days, finalPrice: prices.final });
        
        // WhatsApp
        const msg = `üéÆ *Royal Games Booking*\nID: ${custID}\nName: ${name}\nConsole: ${consoleType}\nPrice: ‚Çπ${prices.final}\nLevel: ${userLoyaltyLevel}`;
        window.open(`https://wa.me/919303088645?text=${encodeURIComponent(msg)}`);
        
        btn.disabled = false;
        btn.innerText = "Book on WhatsApp";
    });
}

// 5. REVIEWS & GALLERY
function loadReviews(){
    const gallery = document.getElementById('reviewGallery');
    db.ref('reviews').limitToLast(6).on('value', snap => {
        gallery.innerHTML = "";
        const revs = [];
        snap.forEach(c => revs.push(c.val()));
        revs.reverse().forEach(r => {
            gallery.innerHTML += `<div style="background:#1f2937; padding:10px; border-radius:10px; border:1px solid #374151;">
                <strong>${r.name}</strong> <span style="color:gold">${'‚≠ê'.repeat(r.rating)}</span><br>
                <small>${r.message}</small>
            </div>`;
        });
    });
}
function sendReview(){
    const name = document.getElementById('reviewName').value;
    const msg = document.getElementById('reviewMessage').value;
    const rate = document.getElementById('reviewRating').value;
    if(!name || !msg) return alert("Fill details");
    db.ref('reviews').push({ name, message: msg, rating: rate, timestamp: Date.now() })
      .then(() => { alert("Review Sent!"); document.getElementById('reviewMessage').value=""; });
}

// 6. EXTRAS (PDF, Ghost, Listeners)
function generateInvoicePDF(data){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.text(`INVOICE: ${data.customerID}`, 10, 10);
    doc.text(`Customer: ${data.name}`, 10, 20);
    doc.text(`Amount: ${data.finalPrice}`, 10, 30);
    doc.save("RoyalGames_Invoice.pdf");
}

let ghostInterval;
function startGhostAlerts(){
    if(ghostInterval) return;
    const locs = ["Neemuch", "Manasa", "Jawad", "Mhow Road"];
    ghostInterval = setInterval(() => {
        const el = document.getElementById('ghostAlert');
        el.innerText = `üî• Someone from ${locs[Math.floor(Math.random()*locs.length)]} just booked!`;
        el.style.display = 'block';
        setTimeout(() => el.style.display='none', 4000);
    }, 25000);
}

// Init
['days','console','coupon'].forEach(id => document.getElementById(id).addEventListener('change', calculatePrice));
window.onload = loadReviews;
</script>
</body>
</html>


  
  
